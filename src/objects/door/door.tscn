[gd_scene load_steps=7 format=3 uid="uid://bne0ne0ock6df"]

[ext_resource type="Script" uid="uid://dx165os7cdo7i" path="res://src/objects/door/door.gd" id="1_deedn"]

[sub_resource type="SphereShape3D" id="SphereShape3D_1ny07"]
radius = 0.137425

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_1ny07"]
friction = 0.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1ny07"]
shading_mode = 0
albedo_color = Color(0, 0, 0, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_deedn"]
albedo_color = Color(1, 0.75, 0, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_1ny07"]
size = Vector3(0.1, 3, 1)

[node name="Door" type="Node3D" node_paths=PackedStringArray("door_phys")]
script = ExtResource("1_deedn")
door_phys = NodePath("DoorPhys")

[node name="StaticBody3D" type="StaticBody3D" parent="."]
collision_layer = 0
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("SphereShape3D_1ny07")

[node name="DoorPhys" type="RigidBody3D" parent="."]
collision_mask = 18
axis_lock_angular_x = true
axis_lock_angular_z = true
mass = 10.0
physics_material_override = SubResource("PhysicsMaterial_1ny07")
angular_damp = 10.0

[node name="CSGBox3D" type="CSGBox3D" parent="DoorPhys"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0.5)
layers = 1025
material_override = SubResource("StandardMaterial3D_1ny07")
size = Vector3(0.1, 3, 1)

[node name="CSGBox3D2" type="CSGBox3D" parent="DoorPhys"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.72529e-09, 1.15, 0.875)
layers = 4
material_override = SubResource("StandardMaterial3D_deedn")
size = Vector3(0.3, 0.1, 0.15)

[node name="CollisionShape3D" type="CollisionShape3D" parent="DoorPhys"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0.5)
shape = SubResource("BoxShape3D_1ny07")

[node name="Generic6DOFJoint3D" type="Generic6DOFJoint3D" parent="."]
node_a = NodePath("../StaticBody3D")
node_b = NodePath("../DoorPhys")
angular_limit_y/upper_angle = 1.5708
angular_limit_y/lower_angle = -1.5708
angular_limit_y/softness = 0.05

[node name="VisibleOnScreenNotifier3D" type="VisibleOnScreenNotifier3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0.5)
aabb = AABB(-1, -1.5, -1, 2, 3, 2)

[connection signal="screen_entered" from="VisibleOnScreenNotifier3D" to="." method="_on_visible_on_screen_notifier_3d_screen_entered"]
[connection signal="screen_exited" from="VisibleOnScreenNotifier3D" to="." method="_on_visible_on_screen_notifier_3d_screen_exited"]

[gd_scene load_steps=14 format=4 uid="uid://cpny4gqkatb3v"]

[ext_resource type="Script" uid="uid://be5awu38p851b" path="res://LevelManager/Levels/Elevator.gd" id="1_djdeb"]
[ext_resource type="MeshLibrary" uid="uid://dm1xr2elw21od" path="res://assets/Meshlibs/floor_meshlib.tres" id="2_djdeb"]
[ext_resource type="Script" uid="uid://thqsm0npqqo" path="res://src/tools/gridmap_converter.gd" id="3_ibl23"]

[sub_resource type="Animation" id="Animation_0q4yv"]
length = 0.001
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ElevatorDoor")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0.033844, 1.30005, 3.46106)

[sub_resource type="Animation" id="Animation_djdeb"]
resource_name = "door_close"
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ElevatorDoor")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0.0333333, 1, 0.033844, 1.30005, 3.46106, 0.966667, 1, 2.03384, 1.30005, 3.46106)

[sub_resource type="Animation" id="Animation_7x2w8"]
resource_name = "door_open"
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ElevatorDoor")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0.0333333, 1, 2.03384, 1.30005, 3.46106, 0.966667, 1, 0.033844, 1.30005, 3.46106)

[sub_resource type="AnimationLibrary" id="AnimationLibrary_0q4yv"]
_data = {
&"RESET": SubResource("Animation_0q4yv"),
&"door_close": SubResource("Animation_djdeb"),
&"door_open": SubResource("Animation_7x2w8")
}

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_j1grx"]
shading_mode = 0
albedo_color = Color(0, 0, 0, 1)

[sub_resource type="ArrayMesh" id="ArrayMesh_ut80c"]
_surfaces = [{
"aabb": AABB(-0.5, -0.5, -0.5, 1, 3, 1),
"format": 34359742465,
"index_count": 36,
"index_data": PackedByteArray("AAABAAIAAgABAAMAAAAEAAEABAADAAEAAgAFAAAAAgADAAUABgAEAAAAAAAFAAYABwADAAQABQADAAcABgAHAAQABQAHAAYA"),
"name": "Cube",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 8,
"vertex_data": PackedByteArray("AAAAvwAAIEAAAAA/AAAAvwAAAL8AAAA/AAAAvwAAIEAAAAC/AAAAvwAAAL8AAAC/AAAAPwAAAL8AAAA/AAAAPwAAIEAAAAC/AAAAPwAAIEAAAAA/AAAAPwAAAL8AAAC/")
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_8gnpo"]
_surfaces = [{
"aabb": AABB(-0.5, -0.5, -0.5, 1, 3, 1),
"attribute_data": PackedByteArray("AAAAAAAAgD8AAAAAAACAPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAAAAAAIA/AAAAAAAAgD8AAIA/AAAAAAAAAAAAAAAAAACAPwAAgD8AAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAgD8AAIA/"),
"format": 34359742487,
"index_count": 36,
"index_data": PackedByteArray("AAABAAIAAgABAAMABAAFAAYABgAFAAcACAAJAAoACgAJAAsADAANAA4ADgANAA8AEAARABIAEgARABMAFAAVABYAFgAVABcA"),
"material": SubResource("StandardMaterial3D_j1grx"),
"name": "Cube",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 24,
"vertex_data": PackedByteArray("AAAAvwAAIEAAAAA/AAAAvwAAAL8AAAA/AAAAvwAAIEAAAAC/AAAAvwAAAL8AAAC/AAAAvwAAIEAAAAC/AAAAvwAAAL8AAAC/AAAAPwAAIEAAAAC/AAAAPwAAAL8AAAC/AAAAPwAAIEAAAAC/AAAAPwAAAL8AAAC/AAAAPwAAIEAAAAA/AAAAPwAAAL8AAAA/AAAAPwAAIEAAAAA/AAAAPwAAAL8AAAA/AAAAvwAAIEAAAAA/AAAAvwAAAL8AAAA/AAAAPwAAAL8AAAC/AAAAvwAAAL8AAAC/AAAAPwAAAL8AAAA/AAAAvwAAAL8AAAA/AAAAvwAAIEAAAAC/AAAAPwAAIEAAAAC/AAAAvwAAIEAAAAA/AAAAPwAAIEAAAAA/AAD/f////78AAP9/////vwAA/3////+/AAD/f////7//////////v/////////+//////////7//////////v////3////+/////f////7////9/////v////3////+//3//f////z//f/9/////P/9//3////8//3//f////z//fwAA////P/9/AAD///8//38AAP///z//fwAA////P/9///////+//3///////7//f///////v/9///////+/")
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_ut80c")

[sub_resource type="MultiMesh" id="MultiMesh_ibl23"]
transform_format = 1
instance_count = 20
mesh = SubResource("ArrayMesh_8gnpo")
buffer = PackedFloat32Array(1, 0, 0, 0.5, 0, 1, 0, 0.5, 0, 0, 1, 3.5, 1, 0, 0, -0.5, 0, 1, 0, 0.5, 0, 0, 1, 3.5, 1, 0, 0, -1.5, 0, 1, 0, 0.5, 0, 0, 1, 3.5, 1, 0, 0, -1.5, 0, 1, 0, 0.5, 0, 0, 1, 2.5, 1, 0, 0, -1.5, 0, 1, 0, 0.5, 0, 0, 1, 1.5, 1, 0, 0, -1.5, 0, 1, 0, 0.5, 0, 0, 1, 0.5, 1, 0, 0, -1.5, 0, 1, 0, 0.5, 0, 0, 1, -0.5, 1, 0, 0, -0.5, 0, 1, 0, 0.5, 0, 0, 1, -0.5, 1, 0, 0, 0.5, 0, 1, 0, 0.5, 0, 0, 1, -0.5, 1, 0, 0, 1.5, 0, 1, 0, 0.5, 0, 0, 1, -0.5, 1, 0, 0, 2.5, 0, 1, 0, 0.5, 0, 0, 1, -0.5, 1, 0, 0, 3.5, 0, 1, 0, 0.5, 0, 0, 1, -0.5, 1, 0, 0, 4.5, 0, 1, 0, 0.5, 0, 0, 1, -0.5, 1, 0, 0, 5.5, 0, 1, 0, 0.5, 0, 0, 1, -0.5, 1, 0, 0, 5.5, 0, 1, 0, 0.5, 0, 0, 1, 0.5, 1, 0, 0, 5.5, 0, 1, 0, 0.5, 0, 0, 1, 1.5, 1, 0, 0, 5.5, 0, 1, 0, 0.5, 0, 0, 1, 2.5, 1, 0, 0, 5.5, 0, 1, 0, 0.5, 0, 0, 1, 3.5, 1, 0, 0, 4.5, 0, 1, 0, 0.5, 0, 0, 1, 3.5, 1, 0, 0, 3.5, 0, 1, 0, 0.5, 0, 0, 1, 3.5)

[sub_resource type="BoxMesh" id="BoxMesh_81a5s"]

[sub_resource type="BoxShape3D" id="BoxShape3D_81a5s"]

[node name="Elevator" type="Node3D"]
script = ExtResource("1_djdeb")

[node name="OmniLight3D4" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.63785, 2.00958, 2.07187)
light_cull_mask = 4293919743
shadow_enabled = true
omni_range = 14.75

[node name="GridMapFloor" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
mesh_library = ExtResource("2_djdeb")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(0, 1, 0, 1, 1, 0, 2, 1, 0, 3, 1, 0, 3, 2, 0, 2, 2, 0, 1, 2, 0, 0, 2, 0, 1, 3, 0, 2, 3, 0, 65535, 2, 0, 65535, 1, 0, 65535, 0, 0, 1, 0, 0, 2, 0, 0, 3, 0, 0, 4, 0, 0, 4, 1, 0, 4, 2, 0, 0, 0, 0)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="GridMapWalls" type="GridMap" parent="."]
visible = false
mesh_library = ExtResource("2_djdeb")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(0, 3, 3, 65535, 3, 3, 65534, 3, 3, 65534, 2, 3, 65534, 1, 3, 65534, 0, 3, 65534, 65535, 3, 65535, 65535, 3, 0, 65535, 3, 1, 65535, 3, 2, 65535, 3, 3, 65535, 3, 4, 65535, 3, 5, 65535, 3, 5, 0, 3, 5, 1, 3, 5, 2, 3, 5, 3, 3, 4, 3, 3, 3, 3, 3)
}
script = ExtResource("3_ibl23")
visibility_layers = 1025

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_0q4yv")
}

[node name="GridMapWalls Bake" type="Node3D" parent="."]

[node name="@MultiMeshInstance3D@23918" type="MultiMeshInstance3D" parent="GridMapWalls Bake"]
layers = 1025
multimesh = SubResource("MultiMesh_ibl23")

[node name="ElevatorDoor" type="MeshInstance3D" parent="."]
transform = Transform3D(2.02537, 0, 0, 0, 2.57343, 0, 0, 0, 0.489271, 0.033844, 1.30005, 3.46106)
layers = 1025
mesh = SubResource("BoxMesh_81a5s")

[node name="StaticBody3D" type="StaticBody3D" parent="ElevatorDoor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="ElevatorDoor/StaticBody3D"]
shape = SubResource("BoxShape3D_81a5s")
